{"ast":null,"code":"var _jsxFileName = \"/Users/evanfannin/projects/airbnb_clone/frontend/src/pages/house/createHouse.js\";\nimport React, { Component } from \"react\";\nimport ContentCard from \"../../components/contentCard\";\nimport MainContent from \"../general/mainContent\";\nimport PageTitle from \"../../components/pageTitle\";\nimport Button from '../../components/button';\nimport axiosInstance from \"../../axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class CreateHouse extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = e => {\n      this.setState({ ...this.state,\n        [e.target.name]: e.target.value.trim()\n      });\n    };\n\n    this.handleHouseImageChange = e => {\n      if (e.target.files.length !== 0) {\n        const houseImages = this.state.houseImages.slice();\n\n        for (const file of e.target.files) {\n          houseImages.push(file);\n        }\n\n        this.setState({\n          houseImages: houseImages\n        });\n      }\n    };\n\n    this.handleUploadButtonClick = e => {\n      e.preventDefault();\n      document.getElementById('imageInput').click();\n    };\n\n    this.state = {\n      houseName: '',\n      houseAddress: '',\n      housePrice: 0,\n      houseImages: []\n    };\n  }\n\n  async handleCreateRoom(e) {\n    e.preventDefault();\n    const formData = new FormData();\n    formData.append(\"name\", this.state.houseName);\n    formData.append(\"address\", this.state.houseAddress);\n    formData.append(\"price_per_night\", this.state.housePrice);\n\n    for (let [i, image] of this.state.houseImages) {\n      formData.append(\"image\" + i.toString(), this.state.houseImages[i]);\n    }\n\n    const requestOptions = {\n      method: 'POST',\n      body: formData\n    };\n    console.log(requestOptions);\n\n    try {\n      const response = await axiosInstance.post(\"create-house/\", requestOptions);\n      const data = response.data;\n      this.props.history.push('/house/' + data.name);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  handleHousePriceChange(e) {\n    this.setState({\n      housePrice: e.target.value\n    });\n  }\n\n  handleHouseNameChange(e) {\n    this.setState({\n      houseName: e.target.value\n    });\n  }\n\n  handleHouseAddressChange(e) {\n    this.setState({\n      houseAddress: e.target.value\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(MainContent, {\n      children: [/*#__PURE__*/_jsxDEV(PageTitle, {\n        title: \"Create a House\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ContentCard, {\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"form\",\n          noValidate: true,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"House Name\", /*#__PURE__*/_jsxDEV(\"input\", {\n              required: true,\n              id: \"houseName\",\n              label: \"House Name\",\n              name: \"houseName\",\n              autoFocus: true,\n              onChange: e => this.handleChange(e)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"House Address\", /*#__PURE__*/_jsxDEV(\"input\", {\n              autoComplete: \"address\",\n              required: true,\n              id: \"houseAddress\",\n              label: \"House Address\",\n              name: \"houseAddress\",\n              onChange: e => this.handleChange(e)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"Price Per Night\", /*#__PURE__*/_jsxDEV(\"input\", {\n              required: true,\n              type: \"number\",\n              id: \"price\",\n              label: \"Price Per Night\",\n              name: \"price\",\n              onChange: e => this.handleChange(e)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"House Images\", /*#__PURE__*/_jsxDEV(\"input\", {\n              accept: \"image/*\",\n              hidden: true,\n              onChange: this.handleHouseImageChange,\n              id: \"imageInput\",\n              multiple: true,\n              type: \"file\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: e => this.handleUploadButtonClick(e),\n              children: \"Upload\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 25\n          }, this), this.state.houseImages.map((image, i) => /*#__PURE__*/_jsxDEV(\"p\", {\n            children: image['name']\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 67\n          }, this)), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: e => this.handleCreateRoom(e),\n            children: \"Add House\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/evanfannin/projects/airbnb_clone/frontend/src/pages/house/createHouse.js"],"names":["React","Component","ContentCard","MainContent","PageTitle","Button","axiosInstance","CreateHouse","constructor","props","handleChange","e","setState","state","target","name","value","trim","handleHouseImageChange","files","length","houseImages","slice","file","push","handleUploadButtonClick","preventDefault","document","getElementById","click","houseName","houseAddress","housePrice","handleCreateRoom","formData","FormData","append","i","image","toString","requestOptions","method","body","console","log","response","post","data","history","error","handleHousePriceChange","handleHouseNameChange","handleHouseAddressChange","render","map"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\n\nimport ContentCard from \"../../components/contentCard\";\nimport MainContent from \"../general/mainContent\";\nimport PageTitle from \"../../components/pageTitle\";\nimport Button from '../../components/button';\n\nimport axiosInstance from \"../../axios\";\n\nexport default class CreateHouse extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            houseName: '',\n            houseAddress: '',\n            housePrice: 0,\n            houseImages: []\n        };\n    }\n\n    handleChange = (e) => {\n        this.setState({\n            ...this.state,\n            [e.target.name]: e.target.value.trim()\n        });\n    }\n\n    async handleCreateRoom(e) {\n        e.preventDefault();\n\n        const formData = new FormData();\n        formData.append(\"name\", this.state.houseName);\n        formData.append(\"address\", this.state.houseAddress);\n        formData.append(\"price_per_night\", this.state.housePrice);\n        for (let [i, image] of this.state.houseImages) {\n            formData.append(\"image\" + i.toString(), this.state.houseImages[i])\n        }\n        const requestOptions = {\n            method: 'POST',\n            body: formData\n        };\n\n        console.log(requestOptions);\n\n        try {\n            const response = await axiosInstance.post(\"create-house/\", requestOptions);\n            const data = response.data;\n            this.props.history.push('/house/' + data.name);\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n    handleHousePriceChange(e) {\n        this.setState({\n            housePrice: e.target.value\n        });\n    }\n\n    handleHouseNameChange(e) {\n        this.setState({\n            houseName: e.target.value\n        });\n    }\n\n    handleHouseAddressChange(e) {\n        this.setState({\n            houseAddress: e.target.value\n        });\n    }\n\n    handleHouseImageChange = e => {\n        if (e.target.files.length !== 0) {\n            const houseImages = this.state.houseImages.slice()\n            for (const file of e.target.files) {\n                houseImages.push(file);\n            }\n            this.setState({\n                houseImages: houseImages\n            });\n        }\n    }\n\n    handleUploadButtonClick = (e) => {\n        e.preventDefault();\n        document.getElementById('imageInput').click();\n    }\n\n    render() {\n        return (\n            <MainContent>\n                <PageTitle title='Create a House' />\n                <ContentCard> \n                    <form className='form' noValidate>\n                        <label>\n                            House Name\n                            <input\n                                required\n                                id=\"houseName\"\n                                label=\"House Name\"\n                                name=\"houseName\"\n                                autoFocus\n                                onChange={(e) => this.handleChange(e)}\n                            />\n                        </label>\n                        <label>\n                            House Address\n                            <input\n                                autoComplete=\"address\"\n                                required\n                                id=\"houseAddress\"\n                                label=\"House Address\"\n                                name=\"houseAddress\"\n                                onChange={(e) => this.handleChange(e)}\n                            />\n                        </label>\n                        <label>\n                            Price Per Night\n                            <input\n                                required\n                                type='number'\n                                id=\"price\"\n                                label=\"Price Per Night\"\n                                name=\"price\"\n                                onChange={(e) => this.handleChange(e)}\n                            />\n                        </label>\n                        <label>\n                            House Images\n                            <input\n                                accept=\"image/*\"\n                                hidden\n                                onChange={this.handleHouseImageChange}\n                                id=\"imageInput\"\n                                multiple\n                                type=\"file\"\n                            />\n                                <Button \n                                onClick={(e) => this.handleUploadButtonClick(e)}>Upload</Button>\n                        </label>  \n                        {this.state.houseImages.map((image, i) => <p key={i}>{image['name']}</p>)}\n                        <Button\n                        onClick={(e) => this.handleCreateRoom(e)}>\n                        Add House\n                        </Button>\n                    </form>\n            </ContentCard>\n        </MainContent>\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module"}