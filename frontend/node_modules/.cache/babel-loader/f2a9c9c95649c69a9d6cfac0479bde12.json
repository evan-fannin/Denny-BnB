{"ast":null,"code":"var _jsxFileName = \"/Users/evanfannin/projects/airbnb_clone/frontend/src/pages/user/login.js\",\n    _s = $RefreshSig$();\n\nimport React, { Component, useContext, useState } from 'react';\nimport { Redirect, useLocation, Link } from \"react-router-dom\";\nimport MainContent from \"../general/mainContent\";\nimport Button from \"../../components/button\";\nimport LayoutContainer from \"../../components/layoutContainer\";\nimport ContentCard from \"../../components/contentCard\";\nimport axiosInstance from \"../../axios\";\nimport { AuthContext } from \"../../context\";\nimport \"./user.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Login(props) {\n  _s();\n\n  const {\n    authenticated,\n    setAuthenticated\n  } = useContext(AuthContext);\n  const location = useLocation();\n  const [state, setState] = useState({\n    email: '',\n    password: '',\n    redirectToReferrer: false,\n    invalidCredentials: false\n  });\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    axiosInstance.post('/token/', {\n      email: state.email,\n      password: state.password\n    }).then(response => {\n      localStorage.setItem('access_token', response.data.access);\n      localStorage.setItem('refresh_token', response.data.refresh);\n      axiosInstance.defaults.headers['Authorization'] = 'Bearer ' + localStorage.getItem('access_token');\n      setAuthenticated(true);\n      setState({ ...state,\n        invalidCredentials: false,\n        redirectToReferrer: true\n      });\n    }).catch(error => {\n      if (error.response.status === 401 || error.response.status === 400) {\n        console.log(error.response);\n        setState({ ...state,\n          invalidCredentials: true\n        });\n      }\n    });\n  };\n\n  const handleChange = e => {\n    setState({ ...state,\n      [e.target.name]: e.target.value.trim()\n    });\n  };\n\n  if (state.redirectToReferrer === true) {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: location.state ? location.state.referrer : \"/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 16\n    }, this);\n  } //    if (localStorage.getItem(\"access_token\") != null\n  //        && localStorage.getItem(\"refresh_token\") != null\n  //        && localStorage.getItem(\"access_token\") != 'undefined'\n  //        && localStorage.getItem(\"refresh_token\") != 'undefined'\n  //    ) {\n  //        return <Redirect to=\"/\" />\n  //    }\n\n\n  return /*#__PURE__*/_jsxDEV(MainContent, {\n    children: /*#__PURE__*/_jsxDEV(ContentCard, {\n      style: {\n        width: '50%',\n        backgroundColor: 'white',\n        border: '1px solid rgb(64, 84, 75)'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Log In\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"form\",\n        noValidate: true,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Email\", /*#__PURE__*/_jsxDEV(\"input\", {\n            autoComplete: \"email\",\n            required: true,\n            id: \"email\",\n            label: \"Email Address\",\n            name: \"email\",\n            autoFocus: true,\n            onChange: e => handleChange(e)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Password\", /*#__PURE__*/_jsxDEV(\"input\", {\n            autoComplete: \"current-password\",\n            required: true,\n            name: \"password\",\n            label: \"Password\",\n            type: \"password\",\n            id: \"password\",\n            onChange: e => handleChange(e)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          style: {\n            width: '100%'\n          },\n          onClick: e => handleSubmit(e),\n          children: \"Sign In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(LayoutContainer, {\n          style: {\n            justifyContent: 'right'\n          },\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            style: {\n              color: 'black'\n            },\n            to: \"/signup\",\n            variant: \"body2\",\n            children: \"Don't have an account? Sign Up\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(LayoutContainer, {\n        children: /*#__PURE__*/_jsxDEV(InvalidCredentials, {\n          invalidCredentials: state.invalidCredentials\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Login, \"RxUD/OrzU9IanYYg6lLq5aOzc5Y=\", false, function () {\n  return [useLocation];\n});\n\n_c = Login;\n\nfunction InvalidCredentials(props) {\n  if (props.invalidCredentials === true) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"The email or password you entered is invalid.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Check that you entered them correctly or create an account.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true);\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n}\n\n_c2 = InvalidCredentials;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Login\");\n$RefreshReg$(_c2, \"InvalidCredentials\");","map":{"version":3,"sources":["/Users/evanfannin/projects/airbnb_clone/frontend/src/pages/user/login.js"],"names":["React","Component","useContext","useState","Redirect","useLocation","Link","MainContent","Button","LayoutContainer","ContentCard","axiosInstance","AuthContext","Login","props","authenticated","setAuthenticated","location","state","setState","email","password","redirectToReferrer","invalidCredentials","handleSubmit","e","preventDefault","post","then","response","localStorage","setItem","data","access","refresh","defaults","headers","getItem","catch","error","status","console","log","handleChange","target","name","value","trim","referrer","width","backgroundColor","border","justifyContent","color","InvalidCredentials"],"mappings":"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","sourcesContent":["import React, { Component, useContext, useState } from 'react'\nimport { Redirect, useLocation, Link } from \"react-router-dom\";\n\nimport MainContent from \"../general/mainContent\";\nimport Button from \"../../components/button\";\nimport LayoutContainer from \"../../components/layoutContainer\";\nimport ContentCard from \"../../components/contentCard\";\n\nimport axiosInstance from \"../../axios\";\nimport { AuthContext } from \"../../context\";\n\nimport \"./user.scss\";\n\n\nexport default function Login(props) {\n    const { authenticated, setAuthenticated } = useContext(AuthContext);\n\n    const location = useLocation();\n\n    const [state, setState] = useState({\n        email: '',\n        password: '',\n        redirectToReferrer: false,\n        invalidCredentials: false\n    });\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n\n        axiosInstance.post('/token/', {\n            email: state.email,\n            password: state.password\n        })\n        .then(response => {\n            localStorage.setItem('access_token', response.data.access);\n            localStorage.setItem('refresh_token', response.data.refresh);\n            axiosInstance.defaults.headers['Authorization'] =\n\t\t\t\t\t'Bearer ' + localStorage.getItem('access_token');\n\t\t\tsetAuthenticated(true);\n\t\t\tsetState({...state, invalidCredentials: false, redirectToReferrer: true});\n        })\n        .catch(error => {\n            if (error.response.status === 401 || error.response.status === 400) {\n                console.log(error.response);\n                setState({...state, invalidCredentials: true});\n            }\n        });\n    }\n\n    const handleChange = (e) => {\n        setState({\n            ...state,\n            [e.target.name]: e.target.value.trim()\n        });\n    }\n\n    if (state.redirectToReferrer === true) {\n        return <Redirect to={location.state\n        ? location.state.referrer\n        : \"/\"\n        } />;\n    }\n\n//    if (localStorage.getItem(\"access_token\") != null\n//        && localStorage.getItem(\"refresh_token\") != null\n//        && localStorage.getItem(\"access_token\") != 'undefined'\n//        && localStorage.getItem(\"refresh_token\") != 'undefined'\n//    ) {\n//        return <Redirect to=\"/\" />\n//    }\n\n    return(\n        <MainContent>\n            <ContentCard style={{width: '50%',\n            backgroundColor: 'white',\n            border: '1px solid rgb(64, 84, 75)'}}>\n                <h1>\n                    Log In\n                </h1>\n                <form className=\"form\" noValidate>\n                    <label>\n                    Email\n                        <input\n                            autoComplete=\"email\"\n                            required\n                            id=\"email\"\n                            label=\"Email Address\"\n                            name=\"email\"\n                            autoFocus\n                            onChange={(e) => handleChange(e)}\n                        />\n                    </label>\n                    <label>\n                    Password\n                        <input\n                            autoComplete=\"current-password\"\n                            required\n                            name=\"password\"\n                            label=\"Password\"\n                            type=\"password\"\n                            id=\"password\"\n                            onChange={(e) => handleChange(e)}\n                        />\n                    </label>\n                    <Button\n                        style={{width: '100%'}}\n                        onClick={(e) => handleSubmit(e)}\n                    >\n                        Sign In\n                    </Button>\n                    <LayoutContainer style={{justifyContent: 'right'}}>\n                        <Link style={{color: 'black'}} to=\"/signup\" variant=\"body2\">\n                            Don't have an account? Sign Up\n                        </Link>\n                    </LayoutContainer>\n                </form>\n                <LayoutContainer>\n                    <InvalidCredentials invalidCredentials={state.invalidCredentials} />\n                </LayoutContainer>\n            </ContentCard>\n        </MainContent>\n    )\n}\n\nfunction InvalidCredentials(props) {\n    if (props.invalidCredentials === true) {\n        return (\n           <>\n              <p>\n                The email or password you entered is invalid.\n              </p>\n              <p>\n                Check that you entered them correctly or create an account.\n              </p>\n            </>\n        );\n    }\n\n    return (\n        <>\n            <p></p>\n        </>\n    );\n}"]},"metadata":{},"sourceType":"module"}