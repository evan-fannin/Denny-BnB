{"ast":null,"code":"var _jsxFileName = \"/Users/evanfannin/projects/airbnb_clone/frontend/src/pages/house/createHouse.js\";\nimport React, { Component } from \"react\";\nimport ContentCard from \"../../components/contentCard\";\nimport MainContent from \"../general/mainContent\";\nimport PageTitle from \"../../components/pageTitle\";\nimport Button from '../../components/button';\nimport axiosInstance from \"../../axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class CreateHouse extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.handleHouseImageChange = e => {\n      if (e.target.files.length !== 0) {\n        const houseImages = this.state.houseImages.slice();\n\n        for (const file of e.target.files) {\n          houseImages.push(file);\n        }\n\n        this.setState({\n          houseImages: houseImages\n        });\n      }\n    };\n\n    this.handleUploadButtonClick = e => {\n      e.preventDefault();\n      document.getElementById('imageInput').click();\n    };\n\n    this.state = {\n      houseName: '',\n      houseAddress: '',\n      housePrice: 0,\n      houseImages: []\n    };\n  }\n\n  async handleCreateRoom(e) {\n    e.preventDefault();\n    console.log('state');\n    console.log(this.state);\n    const formData = new FormData();\n    formData.append(\"name\", this.state.houseName);\n    formData.append(\"address\", this.state.houseAddress);\n    formData.append(\"price_per_night\", this.state.housePrice);\n\n    for (let [i, image] of this.state.houseImages.entries()) {\n      formData.append(\"image\" + i.toString(), image);\n    }\n\n    const requestOptions = {\n      method: 'POST',\n      body: formData\n    };\n\n    for (let pair of formData.entries()) {\n      console.log(pair[0] + ', ' + pair[1]);\n    }\n\n    try {\n      const response = await axiosInstance.post(\"create-house/\", formData);\n      const data = response.data;\n      this.props.history.push('/house/' + data.name);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  handleHousePriceChange(e) {\n    this.setState({\n      housePrice: e.target.value\n    });\n  }\n\n  handleHouseNameChange(e) {\n    this.setState({\n      houseName: e.target.value\n    });\n  }\n\n  handleHouseAddressChange(e) {\n    this.setState({\n      houseAddress: e.target.value\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(MainContent, {\n      children: [/*#__PURE__*/_jsxDEV(PageTitle, {\n        title: \"Create a House\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ContentCard, {\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"form\",\n          noValidate: true,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"House Name\", /*#__PURE__*/_jsxDEV(\"input\", {\n              required: true,\n              id: \"houseName\",\n              label: \"House Name\",\n              name: \"houseName\",\n              autoFocus: true,\n              onChange: e => this.handleChange(e)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"House Address\", /*#__PURE__*/_jsxDEV(\"input\", {\n              autoComplete: \"address\",\n              required: true,\n              id: \"houseAddress\",\n              label: \"House Address\",\n              name: \"houseAddress\",\n              onChange: e => this.handleChange(e)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"Price Per Night\", /*#__PURE__*/_jsxDEV(\"input\", {\n              required: true,\n              id: \"price\",\n              label: \"Price Per Night\",\n              name: \"price\",\n              onChange: e => this.handleChange(e)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"House Images\", /*#__PURE__*/_jsxDEV(\"input\", {\n              accept: \"image/*\",\n              hidden: true,\n              onChange: this.handleHouseImageChange,\n              id: \"imageInput\",\n              multiple: true,\n              type: \"file\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: e => this.handleUploadButtonClick(e),\n              children: \"Upload\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 25\n          }, this), this.state.houseImages.map((image, i) => /*#__PURE__*/_jsxDEV(\"p\", {\n            children: image['name']\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 67\n          }, this)), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: e => this.handleCreateRoom(e),\n            children: \"Add House\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/evanfannin/projects/airbnb_clone/frontend/src/pages/house/createHouse.js"],"names":["React","Component","ContentCard","MainContent","PageTitle","Button","axiosInstance","CreateHouse","constructor","props","handleChange","e","setState","target","name","value","handleHouseImageChange","files","length","houseImages","state","slice","file","push","handleUploadButtonClick","preventDefault","document","getElementById","click","houseName","houseAddress","housePrice","handleCreateRoom","console","log","formData","FormData","append","i","image","entries","toString","requestOptions","method","body","pair","response","post","data","history","error","handleHousePriceChange","handleHouseNameChange","handleHouseAddressChange","render","map"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\n\nimport ContentCard from \"../../components/contentCard\";\nimport MainContent from \"../general/mainContent\";\nimport PageTitle from \"../../components/pageTitle\";\nimport Button from '../../components/button';\n\nimport axiosInstance from \"../../axios\";\n\nexport default class CreateHouse extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            houseName: '',\n            houseAddress: '',\n            housePrice: 0,\n            houseImages: []\n        };\n    }\n\n    handleChange = (e) => {\n        this.setState({\n            [e.target.name]: e.target.value\n        });\n    }\n\n    async handleCreateRoom(e) {\n        e.preventDefault();\n\n        console.log('state');\n        console.log(this.state);\n\n        const formData = new FormData();\n        formData.append(\"name\", this.state.houseName);\n        formData.append(\"address\", this.state.houseAddress);\n        formData.append(\"price_per_night\", this.state.housePrice);\n        for (let [i, image] of this.state.houseImages.entries()) {\n            formData.append(\"image\" + i.toString(), image)\n        }\n        const requestOptions = {\n            method: 'POST',\n            body: formData\n        };\n\n        for(let pair of formData.entries()) {\n            console.log(pair[0]+ ', '+ pair[1]);\n        }\n\n        try {\n            const response = await axiosInstance.post(\"create-house/\", formData);\n            const data = response.data;\n            this.props.history.push('/house/' + data.name);\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n    handleHousePriceChange(e) {\n        this.setState({\n            housePrice: e.target.value\n        });\n    }\n\n    handleHouseNameChange(e) {\n        this.setState({\n            houseName: e.target.value\n        });\n    }\n\n    handleHouseAddressChange(e) {\n        this.setState({\n            houseAddress: e.target.value\n        });\n    }\n\n    handleHouseImageChange = e => {\n        if (e.target.files.length !== 0) {\n            const houseImages = this.state.houseImages.slice()\n            for (const file of e.target.files) {\n                houseImages.push(file);\n            }\n            this.setState({\n                houseImages: houseImages\n            });\n        }\n    }\n\n    handleUploadButtonClick = (e) => {\n        e.preventDefault();\n        document.getElementById('imageInput').click();\n    }\n\n    render() {\n        return (\n            <MainContent>\n                <PageTitle title='Create a House' />\n                <ContentCard> \n                    <form className='form' noValidate>\n                        <label>\n                            House Name\n                            <input\n                                required\n                                id=\"houseName\"\n                                label=\"House Name\"\n                                name=\"houseName\"\n                                autoFocus\n                                onChange={(e) => this.handleChange(e)}\n                            />\n                        </label>\n                        <label>\n                            House Address\n                            <input\n                                autoComplete=\"address\"\n                                required\n                                id=\"houseAddress\"\n                                label=\"House Address\"\n                                name=\"houseAddress\"\n                                onChange={(e) => this.handleChange(e)}\n                            />\n                        </label>\n                        <label>\n                            Price Per Night\n                            <input\n                                required\n                                id=\"price\"\n                                label=\"Price Per Night\"\n                                name=\"price\"\n                                onChange={(e) => this.handleChange(e)}\n                            />\n                        </label>\n                        <label>\n                            House Images\n                            <input\n                                accept=\"image/*\"\n                                hidden\n                                onChange={this.handleHouseImageChange}\n                                id=\"imageInput\"\n                                multiple\n                                type=\"file\"\n                            />\n                                <Button \n                                onClick={(e) => this.handleUploadButtonClick(e)}>Upload</Button>\n                        </label>  \n                        {this.state.houseImages.map((image, i) => <p key={i}>{image['name']}</p>)}\n                        <Button\n                        onClick={(e) => this.handleCreateRoom(e)}>\n                        Add House\n                        </Button>\n                    </form>\n            </ContentCard>\n        </MainContent>\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module"}